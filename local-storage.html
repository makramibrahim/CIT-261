<!DOCTYPE html>
<html>
<head>
 <title>CIT 261 | Local Storage API</title>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="stylesheet" type="text/css" href="index.css" media="screen">

<script type="text/javascript">
/****************************************
* This local storage function will carry
* some data on server using storageitem keyword 
*****************************************/
 function mylocalStorage() {

  var pot = ["red pen", "green pen", "blue pen", "yellow pen"];

  if (typeof(Storage) !== "undefined") {
    // store data to local storage
    localStorage.setItem("pot", JSON.stringify(pot));
    // retrieve data
    document.getElementById("output").innerHTML = localStorage.getItem("pot");

  } else {
    document.getElementById("output").innerHTML = "Sorry, the browser does not support web storage";
  }
}

// assign a new variable to array
var letter = new Array();
/****************************************
* Get Letter function will display an Associate 
* Array  of the local storages.
*****************************************/
function getLetter() {
  
  letter = {
    giftGiver: document.getElementById('giftGiver').value,
    present:  document.getElementById('present').value,
    yourAge:  document.getElementById('age').value,
    yourName: document.getElementById('name').value,
  };

   if (typeof(Storage) !== "undefined") {
      // store data to local storage
    localStorage.setItem("letter", JSON.stringify(letter));
    // retrieve data
 document.getElementById("outputall").innerHTML = 
 "Dear " + letter.giftGiver + ", " + "Thank you for the " +
 letter.present + ", I really like it. I can't believe that I am already " + letter.yourAge + " years old." +  " <br>Sincerely,<br>" + letter.yourName;

  } else {
    document.getElementById("outputall").innerHTML = "Sorry, the browser does not support web storage"
  }
}

/****************************************
* This program will display a combine methods
* of local storages.
*****************************************/
function retrieveLetter() {

 var retrLetter = localStorage.getItem("letter", JSON.stringify(letter));
  var letter = JSON.parse(retrLetter);

document.getElementById("outputall").innerHTML = 
 "Dear " + letter.giftGiver + ", " + "Thank you for the " +
 letter.present + ", I really like it. I can't believe that I am already " + letter.yourAge + " years old." +  " <br>Sincerely,<br>" + letter.yourName;
}

var car = new Array(); 
/****************************************
* Create Object function, will basically 
* ask the user to type a input and save in the
* local storages. 
*****************************************/
var objects = new Array();

function listOfObjects() {
    objects.push(document.getElementById('names').value);
    localStorage.setItem("myList", JSON.stringify(objects));
    document.getElementById('names').value='';
    document.getElementById("output2").innerHTML = "Your list: " + objects;
}

/****************************************
* The retruieve object fucntion will 
* execute the output of the local storages.
*****************************************/
function retrieveObject() {

    document.getElementById("output3").innerHTML = localStorage.myList; 
}
		

/****************************************
* Reset function will clear all the outputs
* data for the user to retype again
*****************************************/
function reset() {
    objects = [];
    document.getElementById("output").innerHTML = "";
}

</script>
</head>
<body>
  <header>
<h1>CIT 261 Mobile Application-BYUI</h1>
<ul>
  <li><a href="index.html">Home</a></li>
</ul>
</header> 
 <div class="mainPage">
 <h2>Local Storage API, Storing and Retrieving Simple Data</h2>
 <!--prompt the user for input-->
 <button type="button" onclick="mylocalStorage();">Click</button>
 <button type="button" onclick="reset();">Reset</button>
 <h4>Retrieve Local Storages</h4>
 
 <!--Second example of creating a letter and retrieve it using json parse-->
<div id="output"></div>
 <h2> This is a thank you letter for someone gave you a present on your birthday</h2>
 <input type="input" id="giftGiver" placeholder="Gift giver's name:"><br>
 <input type="input" id="present" placeholder="Present's name:"><br>
 <input type="input" id="age" placeholder="Your age:"><br>
 <input type="input" id="name" placeholder="Your name:"><br>
 <button type="button" onclick="getLetter();">Submit</button>
 <button type="button" onclick="retrieveLetter();">Retrieve</button>
 <div id="outputall"></div><br>
 
<!--Thrid example using create object in the local sotrages-->
<h2>Objects</h2>
 <h4>Make a new list of Objects </h4>
		<input type="text" id="names"/>
		<button onclick="listOfObjects()">Enter Object</button>
		<button onclick="reset()">Reset</button>
		<div id="output2"></div>
	
		<p> Retrieve the list even if you refresh the page!</p>
		<button onclick="retrieveObject()">Retrieve List</button>
		<div id="output3"></div>

<br><br>
</div>
 <footer>&COPY; 2017 Makram Ibrahim </footer>
</body>
</html>
